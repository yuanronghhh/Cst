set(search_dirs
  ${LIBDIR}
  /usr/local
  /usr
)

set(CAIRO_FILES "")
FIND_PATH(CAIRO_INCLUDE_DIR
  NAMES cairo/cairo.h
  HINTS ${search_dirs}
  PATH_SUFFIXES include cairo/include
)

set(CAIRO_COMPONENTS
  cairo-gobject
  cairo-script-interpreter
  cairo
)

FOREACH(COMPONENT ${CAIRO_COMPONENTS})
  STRING(TOUPPER ${COMPONENT} UPPERCOMPONENT)

  FIND_LIBRARY(CAIRO_${UPPERCOMPONENT}_LIBRARY
    NAMES ${COMPONENT}
    HINTS ${search_dirs}
    PATH_SUFFIXES lib64 lib cairo/lib
  )

  LIST(APPEND CAIRO_LIBRARY "${CAIRO_${UPPERCOMPONENT}_LIBRARY}")
ENDFOREACH()

set(CAIRO_FILE_COMPONENTS
  "cairo-2.dll"
  "cairo-gobject-2.dll"
  "cairo-script-interpreter-2.dll")

if(WIN32)
  FOREACH(COMPONENT ${CAIRO_FILE_COMPONENTS})
    STRING(TOUPPER ${COMPONENT} UPPERCOMPONENT)

    FIND_FILE(CAIRO_${COMPONENT}_FILE
      NAMES ${COMPONENT}
      HINTS ${search_dirs}
      PATH_SUFFIXES cairo/bin expat/bin glib/bin/ fontconfig/bin libpng/bin freetype/bin
    )

    LIST(APPEND CAIRO_FILES "${CAIRO_${COMPONENT}_FILE}")
  ENDFOREACH()
endif()

LIST(APPEND CAIRO_INCLUDE_DIR "${CAIRO_INCLUDE_DIR}/cairo")
LIST(APPEND CAIRO_INCLUDE_DIR "${PANGO_INCLUDE_DIRS}")
LIST(APPEND CAIRO_INCLUDE_DIR "${PIXMAN_INCLUDE_DIRS}")
LIST(APPEND CAIRO_INCLUDE_DIR "${FREETYPE_INCLUDE_DIRS}")
LIST(APPEND CAIRO_INCLUDE_DIR "${PTHREAD_INCLUDE_DIRS}")
LIST(APPEND CAIRO_INCLUDE_DIR "${HARFBUZZ_INCLUDE_DIRS}")
LIST(APPEND CAIRO_FILES "${PANGO_FILES}")

INCLUDE(FindPackageHandleStandardArgs)
FIND_PACKAGE_HANDLE_STANDARD_ARGS(CAIRO DEFAULT_MSG
  CAIRO_LIBRARY CAIRO_INCLUDE_DIR)

IF(CAIRO_FOUND)
  SET(CAIRO_LIBRARIES ${CAIRO_LIBRARY})
  SET(CAIRO_INCLUDE_DIRS ${CAIRO_INCLUDE_DIR})
ENDIF(CAIRO_FOUND)

MARK_AS_ADVANCED(
  CAIRO_INCLUDE_DIR
  CAIRO_LIBRARY
)
